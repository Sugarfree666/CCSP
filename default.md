题目：基于图卷积网络(GCN)的电影推荐系统设计与实现

https://github.com/SohamBodhak/Movie_Recommendation_using_GNN.git







现在有一个例子是：s1->s2->s4, s1->s3->s4这样两条从s1到s2的路径，如果用详细平衡公式:
$$
F(s_t)P(s_{t+1}|s_t)=F(s_{t+1})
$$
那么对于一条路径s1->s2->s4，就有
$$
F(s_1)P(s_2|s_1)P(s_4|s_2)=F(s_4)
$$
既然这一条流值等于了F(s4)，还有另外一条路径的流值，不就导致公式不成立了吗？



上面的思想是全局流匹配（FM）的思想，论文中为了计算可行使用的是详细平衡公式。具体地说：

什么是流匹配？
$$
\sum_{s_p \in \text{Parents}(s)} F(s_p) \cdot P_F(s | s_p) = F(s) \quad \text{（对所有 s 成立）}
$$
这是一个全局的约束，因为它要求一个状态 *s* 的流量必须等于所有父结点的流量之和。在复杂的KG中直接优化这个求和目标很困难，所以论文使用了详细平衡公式来进行局部约束，l来满足另一个目标。

证明 GraphFlow 的简化目标：
$$
F(s_t) \cdot P_F(s_{t+1} | s_t) = F(s_{t+1}) \cdot P_B(s_t | s_{t+1})
$$
把DB这个等式在 s_t+1 结点的所有父节点 s_t 求和：
$$
\sum_{s_t} [F(s_t) \cdot P_F(s_{t+1} | s_t)] = \sum_{s_t} [F(s_{t+1}) \cdot P_B(s_t | s_{t+1})]
$$
也就是：
$$
\sum_{s_t} [F(s_t) \cdot P_F(s_{t+1} | s_t)]= F(s_{t+1}) \cdot \sum_{s_t} P_B(s_t | s_{t+1})
$$

$$
在一个标准的GFlowNet设置中，P_B 是一个合法的概率分布。\\
这意味着，当你处于 s 时，你必须从它的父节点中选择一个退回。\\因此，所有这些反向概率的总和必须等于 1。\\\sum_{s_t} P_B(s_t | s_{t+1})=1
$$

因此等式转化为
$$
\sum_{s_t} [F(s_t) \cdot P_F(s_{t+1} | s_t)]= F(s_{t+1})
$$
但是文中设置反向概率为1，所以产生矛盾，也就说本文主要目的并不是为了满足FM，而是满足轨迹平衡。

因此在本论文的设置下，F（s4）的值不是简单的求和，它实际是一个“势”，也就是说模型不会直接预测和计算流值，而是预测“潜力”。

